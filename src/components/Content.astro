---
import { API_URL } from "@const/consts";
import type { IArtwork } from "../types/artwork";
import type { ServiceResponse } from "../types/serviceResponse";

const response = await fetch(`${API_URL}/artworks?limit=7`);
const { data: artworks }: ServiceResponse<IArtwork[]> = await response.json();
---

<section
  class="gallery justify-center items-center md:items-start pt-[2%] flex overflow-x-scroll md:overflow-x-visible"
>
  <article
    class="panel left md:border-y-2 md:border-black hidden md:flex justify-center h-[87%] gap-12 items-center grow z-10 bg-light"
  >
    <img
      src={artworks[0].image}
      alt={`Image of ${artworks[0].name}`}
      class="w-2 md:w-2/5 h-full md:h-3/4"
    />
    <img
      src={artworks[1].image}
      alt={`Image of ${artworks[1].name}`}
      class="w-2/5 h-full md:h-3/4 object-cover"
    />
  </article>
  <article
    class="flex md:justify-center items-center w-full md:w-[67%] h-[87%] md:border-2 md:border-black box-border gap-x-4 md:gap-24"
  >
    <img
      src={artworks[0].image}
      alt={`Image of ${artworks[0].name}`}
      class="ml-4 w-5/6 md:w-2/5 h-full md:h-3/4 md:hidden"
    />
    <img
      src={artworks[1].image}
      alt={`Image of ${artworks[1].name}`}
      class="w-5/6 md:w-2/5 h-full md:h-3/4 object-cover md:hidden"
    />
    <img
      src={artworks[2].image}
      alt={`Image of ${artworks[2].name}`}
      class="w-5/6 md:w-2/5 h-full md:h-3/4"
    />
    <img
      src={artworks[3].image}
      alt={`Image of ${artworks[3].name}`}
      class="w-5/6 md:w-2/5 h-full md:h-3/4"
    />
    <img
      src={artworks[4].image}
      alt={`Image of ${artworks[4].name}`}
      class="w-5/6 md:w-2/5 h-full md:h-3/4"
    />
    <img
      src={artworks[5].image}
      alt={`Image of ${artworks[5].name}`}
      class="w-5/6 md:w-2/5 h-full md:h-3/4 md:hidden"
    />
    <img
      src={artworks[6].image}
      alt={`Image of ${artworks[6].name}`}
      class="pr-4 w-5/6 md:w-2/5 h-full md:h-3/4 md:hidden"
    />
  </article>
  <article
    class="panel right md:border-y-2 md:border-black hidden md:flex justify-center h-[87%] gap-12 items-center grow z-10 bg-light"
  >
    <img
      src={artworks[5].image}
      alt={`Image of ${artworks[5].name}`}
      class="w-2/5 h-full md:h-3/4 object-cover"
    />
    <img
      src={artworks[6].image}
      alt={`Image of ${artworks[6].name}`}
      class="w-2/5 h-full md:h-3/4 hover:transform:skew-x-0"
    />
  </article>
</section>

<style>
  .gallery {
    perspective: 1500px; /* Ajusta la perspectiva para controlar la profundidad */
  }

  .panel {
    transition: transform 0.5s;
  }

  .left {
    transform-origin: center right; /* Origina la transformación desde el borde izquierdo */
    transform: rotateY(60deg); /* Rota el panel en el eje Y */
  }

  .right {
    transform-origin: center left; /* Origina la transformación desde el borde izquierdo */
    transform: rotateY(-60deg); /* Rota el panel en el eje Y */
  }

  img {
    transition: 0.5s ease all;
  }

  img:hover {
    cursor: pointer;
    transform: scale(1.05);
    transition: 0.5s ease all;
  }

  @media screen and (max-width: 768px) {
    .gallery {
      perspective: none;
    }

    .panel {
      transform: none;
    }
  }
</style>
